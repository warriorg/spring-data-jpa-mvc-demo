/** *  */package com.myb.modul.activity.repository.impl;import java.util.List;import com.myb.dto.activity.EventListParamTo;import com.myb.infrastructure.repository.BasicRepository;import com.myb.modul.activity.repository.ActivityRepositoryCustom;/** * @author warrior * */public class ActivityRepositoryImpl extends BasicRepository implements ActivityRepositoryCustom {	/* (non-Javadoc)	 * @see com.myb.modul.activity.repository.IActivityRepositoryCustom#searchEventList(com.myb.dto.activity.EventListParamTo)	 */	@Override	public List<?> searchEventList(EventListParamTo param) {		String jpql = "select * from T_info_Activity C left join ("				+ "select Min(dbo.Distance(31,120, B.LAT, B.LNG)) AS distance, B.ID AS UnitID, A.RefID AS ActivityID "				+ "from T_info_UseInUnit A "				+ "left join T_unit_BasicInfo B on A.Type = 2 and A.UnitID = B.ID group by B.ID,A.RefID) D "				+ "on C.ID = D.ActivityID order by distance";				return entityManager.createNativeQuery(jpql).setFirstResult(0).setMaxResults(20).getResultList();	}}